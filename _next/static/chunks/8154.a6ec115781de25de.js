"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8154],{28154:(e,r,t)=>{t.r(r),t.d(r,{JavaScriptScanner:()=>e6,createJavaScriptRawEngine:()=>rr,createJavaScriptRegexEngine:()=>re,defaultJavaScriptRegexConstructor:()=>e7});let n=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]);function a(e){if(1!=[...e].length)throw Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}let i=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),o=String.raw;function s(e,r){if(null==e)throw Error(r??"Value expected");return e}let l=o`\[\^?`,u=`c.? | C(?:-.?)?|${o`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${o`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${o`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${o`o\{[^\}]*\}?`}|${o`\d{1,3}`}`,p=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,c=RegExp(o`
  \\ (?:
    ${u}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${p.source})+
  | ${l}
  | .
`.replace(/\s+/g,""),"gsu"),d=RegExp(o`
  \\ (?:
    ${u}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${l}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function f(e,{inCharClass:r}){let t=e[1];if("c"===t||"C"===t)return function(e){let r="c"===e[1]?e[2]:e[3];if(!r||!/[A-Za-z]/.test(r))throw Error(`Unsupported control character "${e}"`);return y(a(r.toUpperCase())-64,e)}(e);if("dDhHsSwW".includes(t))return function(e){let r=e[1].toLowerCase();return b({d:"digit",h:"hex",s:"space",w:"word"}[r],e,{negate:e[1]!==r})}(e);if(e.startsWith(o`\o{`))throw Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(3===e.length)throw Error(`Incomplete or invalid Unicode property "${e}"`);return function(e){let{p:r,neg:t,value:n}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return b("property",e,{value:n,negate:"P"===r&&!t||"p"===r&&!!t})}(e)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(e))try{let r=e.split(/\\x/).slice(1).map(e=>parseInt(e,16)),t=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(r)),n=new TextEncoder;return[...t].map(e=>{let r=[...n.encode(e)].map(e=>`\\x${e.toString(16)}`).join("");return y(a(e),r)})}catch{throw Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if("u"===t||"x"===t)return y(function(e){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(e))throw Error(`Incomplete or invalid escape "${e}"`);return parseInt("{"===e[2]?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(e).groups.hex:e.slice(2),16)}(e),e);if(x.has(t))return y(x.get(t),e);if(/\d/.test(t))return{type:"EscapedNumber",inCharClass:r,raw:e};if("\\"===e)throw Error(o`Incomplete escape "\"`);if("M"===t)throw Error(`Unsupported meta "${e}"`);if(2==[...e].length)return y(e.codePointAt(1),e);throw Error(`Unexpected escape "${e}"`)}function g(e,r){return{type:"Assertion",kind:e,raw:r}}function h(e){return{type:"Backreference",raw:e}}function y(e,r){return{type:"Character",value:e,raw:r}}function m(e,r){return{type:"CharacterClassOpen",negate:e,raw:r}}function b(e,r,t={}){return{type:"CharacterSet",kind:e,...t,raw:r}}function C(e,r,t={}){return"keep"===e?{type:"Directive",kind:e,raw:r}:{type:"Directive",kind:e,flags:s(t.flags),raw:r}}function w(e,r,t={}){return{type:"GroupOpen",kind:e,...t,raw:r}}let x=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function k(e){let r=null,t,n;if("{"===e[0]){let{minStr:a,maxStr:i}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups;if(+a>1e5||i&&+i>1e5)throw Error("Quantifier value unsupported in Oniguruma");if((t=+a)>(n=void 0===i?+a:""===i?1/0:+i)&&(r="possessive",[t,n]=[n,t]),e.endsWith("?")){if("possessive"===r)throw Error('Unsupported possessive interval quantifier chain with "?"');r="lazy"}else r||(r="greedy")}else t=+("+"===e[0]),n="?"===e[0]?1:1/0,r="+"===e[1]?"possessive":"?"===e[1]?"lazy":"greedy";return{type:"Quantifier",kind:r,min:t,max:n,raw:e}}function E(e){let r={};return e.includes("i")&&(r.ignoreCase=!0),e.includes("m")&&(r.dotAll=!0),e.includes("x")&&(r.extended=!0),Object.keys(r).length?r:null}function $(e,r){if(!Array.isArray(e.body))throw Error("Expected node with body array");if(1!==e.body.length)return!1;let t=e.body[0];return!r||Object.keys(r).every(e=>r[e]===t[e])}let A=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function I(e,r={}){var t,l;let u={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...r,rules:{captureGroup:!1,singleline:!1,...r.rules}},x=function(e,r={}){let t={flags:"",...r,rules:{captureGroup:!1,singleline:!1,...r.rules}};if("string"!=typeof e)throw Error("String expected as pattern");let s=function(e){if(!/^[imxDPSW]*$/.test(e))throw Error(`Flags "${e}" includes unsupported value`);let r={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1};for(let t of e)r[({i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"})[t]]=!0;return r}(t.flags),l=[s.extended],u={captureGroup:t.rules.captureGroup,getCurrentModX:()=>l.at(-1),numOpenGroups:0,popModX(){l.pop()},pushModX(e){l.push(e)},replaceCurrentModX(e){l[l.length-1]=e},singleline:t.rules.singleline},x=[],$;for(c.lastIndex=0;$=c.exec(e);){let r=function(e,r,t,s){let[l,u]=t;if("["===t||"[^"===t){let e=function(e,r,t){let n=[m("^"===r[1],r)],o=1,s;for(d.lastIndex=t;s=d.exec(e);){let e=s[0];if("["===e[0]&&":"!==e[1])o++,n.push(m("^"===e[1],e));else if("]"===e){if("CharacterClassOpen"===n.at(-1).type)n.push(y(93,e));else{if(o--,n.push({type:"CharacterClassClose",raw:e}),!o)break}}else{let r=function(e){if("\\"===e[0])return f(e,{inCharClass:!0});if("["===e[0]){let r=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!r||!i.has(r.groups.name))throw Error(`Invalid POSIX class "${e}"`);return b("posix",e,{value:r.groups.name,negate:!!r.groups.negate})}return"-"===e?{type:"CharacterClassHyphen",raw:e}:"&&"===e?{type:"CharacterClassIntersector",raw:e}:y(a(e),e)}(e);Array.isArray(r)?n.push(...r):n.push(r)}}return{tokens:n,lastIndex:d.lastIndex||e.length}}(r,t,s);return{tokens:e.tokens,lastIndex:e.lastIndex}}if("\\"===l){if("AbBGyYzZ".includes(u))return{token:g(t,t)};if(/^\\g[<']/.test(t)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(t))throw Error(`Invalid group name "${t}"`);return{token:{type:"Subroutine",raw:t}}}if(/^\\k[<']/.test(t)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(t))throw Error(`Invalid group name "${t}"`);return{token:h(t)}}if("K"===u)return{token:C("keep",t)};if("N"===u||"R"===u)return{token:b("newline",t,{negate:"N"===u})};if("O"===u)return{token:b("any",t)};if("X"===u)return{token:b("grapheme",t)};let e=f(t,{inCharClass:!1});return Array.isArray(e)?{tokens:e}:{token:e}}if("("===l){if("*"===u)return{token:function(e){let r=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!r)throw Error(`Incomplete or invalid named callout "${e}"`);let{name:t,tag:a,args:i}=r.groups;if(!t)throw Error(`Invalid named callout "${e}"`);if(""===a)throw Error(`Named callout tag with empty value not allowed "${e}"`);let o=i?i.split(",").filter(e=>""!==e).map(e=>/^[+-]?\d+$/.test(e)?+e:e):[],[s,l,u]=o,p=n.has(t)?t.toLowerCase():"custom";switch(p){case"fail":case"mismatch":case"skip":if(o.length>0)throw Error(`Named callout arguments not allowed "${o}"`);break;case"error":if(o.length>1)throw Error(`Named callout allows only one argument "${o}"`);if("string"==typeof s)throw Error(`Named callout argument must be a number "${s}"`);break;case"max":if(!o.length||o.length>2)throw Error(`Named callout must have one or two arguments "${o}"`);if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw Error(`Named callout argument one must be a tag or number "${s}"`);if(2===o.length&&("number"==typeof l||!/^[<>X]$/.test(l)))throw Error(`Named callout optional argument two must be '<', '>', or 'X' "${l}"`);break;case"count":case"total_count":if(o.length>1)throw Error(`Named callout allows only one argument "${o}"`);if(1===o.length&&("number"==typeof s||!/^[<>X]$/.test(s)))throw Error(`Named callout optional argument must be '<', '>', or 'X' "${s}"`);break;case"cmp":if(3!==o.length)throw Error(`Named callout must have three arguments "${o}"`);if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw Error(`Named callout argument one must be a tag or number "${s}"`);if("number"==typeof l||!/^(?:[<>!=]=|[<>])$/.test(l))throw Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${l}"`);if("string"==typeof u&&!/^[A-Za-z_]\w*$/.test(u))throw Error(`Named callout argument three must be a tag or number "${u}"`);break;case"custom":throw Error(`Undefined callout name "${t}"`);default:throw Error(`Unexpected named callout kind "${p}"`)}return{type:"NamedCallout",kind:p,tag:a??null,arguments:i?.split(",")??null,raw:e}}(t)};if("(?{"===t)throw Error(`Unsupported callout "${t}"`);if(t.startsWith("(?#")){if(")"!==r[s])throw Error('Unclosed comment group "(?#"');return{lastIndex:s+1}}if(/^\(\?[-imx]+[:)]$/.test(t))return{token:function(e,r){let{on:t,off:n}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;n??="";let a=(r.getCurrentModX()||t.includes("x"))&&!n.includes("x"),i=E(t),o=E(n),s={};if(i&&(s.enable=i),o&&(s.disable=o),e.endsWith(")"))return r.replaceCurrentModX(a),C("flags",e,{flags:s});if(e.endsWith(":"))return r.pushModX(a),r.numOpenGroups++,w("group",e,{...(i||o)&&{flags:s}});throw Error(`Unexpected flag modifier "${e}"`)}(t,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,"("===t&&!e.captureGroup||"(?:"===t)return{token:w("group",t)};if("(?>"===t)return{token:w("atomic",t)};if("(?="===t||"(?!"===t||"(?<="===t||"(?<!"===t)return{token:w("<"===t[2]?"lookbehind":"lookahead",t,{negate:t.endsWith("!")})};if("("===t&&e.captureGroup||t.startsWith("(?<")&&t.endsWith(">")||t.startsWith("(?'")&&t.endsWith("'"))return{token:w("capturing",t,{..."("!==t&&{name:t.slice(3,-1)}})};if(t.startsWith("(?~")){if("(?~|"===t)throw Error(`Unsupported absence function kind "${t}"`);return{token:w("absence_repeater",t)}}throw"(?("===t?Error(`Unsupported conditional "${t}"`):Error(`Invalid or unsupported group option "${t}"`)}if(")"===t){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw Error('Unmatched ")"');return{token:{type:"GroupClose",raw:t}}}if(e.getCurrentModX()){if("#"===t){let e=r.indexOf(`
`,s);return{lastIndex:-1===e?r.length:e}}if(/^\s$/.test(t)){let e=/\s+/y;return e.lastIndex=s,{lastIndex:e.exec(r)?e.lastIndex:s}}}return"."===t?{token:b("dot",t)}:"^"===t||"$"===t?{token:g(e.singleline?({"^":o`\A`,$:o`\Z`})[t]:t,t)}:"|"===t?{token:{type:"Alternator",raw:t}}:p.test(t)?{tokens:function(e){let r;let t=[],n=RegExp(p,"gy");for(;r=n.exec(e);){let e=r[0];if("{"===e[0]){let r=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(e);if(r){let{min:a,max:i}=r.groups;if(+a>+i&&e.endsWith("?")){n.lastIndex--,t.push(k(e.slice(0,-1)));continue}}}t.push(k(e))}return t}(t)}:{token:y(a(t),t)}}(u,e,$[0],c.lastIndex);r.tokens?x.push(...r.tokens):r.token&&x.push(r.token),void 0!==r.lastIndex&&(c.lastIndex=r.lastIndex)}let A=[],I=0;x.filter(e=>"GroupOpen"===e.type).forEach(e=>{"capturing"===e.kind?e.number=++I:"("===e.raw&&A.push(e)}),I||A.forEach((e,r)=>{e.kind="capturing",e.number=r+1});let S=I||A.length;return{tokens:x.map(e=>"EscapedNumber"===e.type?function(e,r){let{raw:t,inCharClass:n}=e,i=t.slice(1);if(!n&&("0"!==i&&1===i.length||"0"!==i[0]&&+i<=r))return[h(t)];let s=[],l=i.match(/^[0-7]+|\d/g);for(let e=0;e<l.length;e++){let r;let n=l[e];if(0===e&&"8"!==n&&"9"!==n){if((r=parseInt(n,8))>127)throw Error(o`Octal encoded byte above 177 unsupported "${t}"`)}else r=a(n);s.push(y(r,(0===e?"\\":"")+n))}return s}(e,S):e).flat(),flags:s}}(e,{flags:u.flags,rules:{captureGroup:u.rules.captureGroup,singleline:u.rules.singleline}}),$=(e,r)=>{let t=x.tokens[O.nextIndex];switch(O.parent=e,O.nextIndex++,t.type){case"Alternator":return S();case"Assertion":return function({kind:e}){return _(s({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"grapheme_boundary","\\Y":"grapheme_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===o`\B`||e===o`\Y`})}(t);case"Backreference":return function({raw:e},r){let t=/^\\k[<']/.test(e),n=t?e.slice(3,-1):e.slice(1),a=(t,n=!1)=>{let a=r.capturingGroups.length,i=!1;if(t>a){if(r.skipBackrefValidation)i=!0;else throw Error(`Not enough capturing groups defined to the left "${e}"`)}return r.hasNumberedRef=!0,v(n?a+1-t:t,{orphan:i})};if(t){let t=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(n);if(t)return a(+t.groups.num,!!t.groups.sign);if(/[-+]/.test(n))throw Error(`Invalid backref name "${e}"`);if(!r.namedGroupsByName.has(n))throw Error(`Group name not defined to the left "${e}"`);return v(n)}return a(+n)}(t,O);case"Character":return N(t.value,{useLastValid:!!r.isCheckingRangeEnd});case"CharacterClassHyphen":return function(e,r,t){let{tokens:n,walk:i}=r,o=r.parent,s=o.body.at(-1),l=n[r.nextIndex];if(!t.isCheckingRangeEnd&&s&&"CharacterClass"!==s.type&&"CharacterClassRange"!==s.type&&l&&"CharacterClassOpen"!==l.type&&"CharacterClassClose"!==l.type&&"CharacterClassIntersector"!==l.type){let e=i(o,{...t,isCheckingRangeEnd:!0});if("Character"===s.type&&"Character"===e.type)return o.body.pop(),function(e,r){if(r.value<e.value)throw Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:r}}(s,e);throw Error("Invalid character class range")}return N(a("-"))}(0,O,r);case"CharacterClassOpen":return function({negate:e},r,t){let{tokens:n,walk:a}=r,i=n[r.nextIndex],o=[L()],s=j(i);for(;"CharacterClassClose"!==s.type;){if("CharacterClassIntersector"===s.type)o.push(L()),r.nextIndex++;else{let e=o.at(-1);e.body.push(a(e,t))}s=j(n[r.nextIndex],i)}let l=L({negate:e});return 1===o.length?l.body=o[0].body:(l.kind="intersection",l.body=o.map(e=>1===e.body.length?e.body[0]:e)),r.nextIndex++,l}(t,O,r);case"CharacterSet":return function({kind:e,negate:r,value:t},n){let{normalizeUnknownPropertyNames:a,skipPropertyNameValidation:o,unicodePropertyMap:s}=n;if("property"===e){let n=z(t);if(!i.has(n)||s?.has(n))return B(t,{negate:r,normalizeUnknownPropertyNames:a,skipPropertyNameValidation:o,unicodePropertyMap:s});e="posix",t=n}return"posix"===e?function(e,r){let t=!!r?.negate;if(!i.has(e))throw Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:t}}(t,{negate:r}):F(e,{negate:r})}(t,O);case"Directive":return function(e,r={}){if("keep"===e)return{type:"Directive",kind:e};if("flags"===e)return{type:"Directive",kind:e,flags:s(r.flags)};throw Error(`Unexpected directive kind "${e}"`)}(t.kind,{flags:t.flags});case"GroupOpen":return function(e,r,t){var n;let{tokens:a,capturingGroups:i,namedGroupsByName:o,skipLookbehindValidation:s,walk:l}=r,u=function({flags:e,kind:r,name:t,negate:n,number:a}){switch(r){case"absence_repeater":return function(e,r){if("repeater"!==e)throw Error(`Unexpected absence function kind "${e}"`);return{type:"AbsenceFunction",kind:e,body:D(void 0)}}("repeater");case"atomic":return P({atomic:!0});case"capturing":return M(a,{name:t});case"group":return P({flags:e});case"lookahead":case"lookbehind":return U({behind:"lookbehind"===r,negate:n});default:throw Error(`Unexpected group kind "${r}"`)}}(e),p="AbsenceFunction"===u.type,c=W(u),d=c&&u.negate;if("CapturingGroup"===u.type&&(i.push(u),u.name&&(n=u.name,o.has(n)||o.set(n,[]),o.get(n)).push(u)),p&&t.isInAbsenceFunction)throw Error("Nested absence function not supported by Oniguruma");let f=V(a[r.nextIndex]);for(;"GroupClose"!==f.type;){if("Alternator"===f.type)u.body.push(S()),r.nextIndex++;else{let e=u.body.at(-1),r=l(e,{...t,isInAbsenceFunction:t.isInAbsenceFunction||p,isInLookbehind:t.isInLookbehind||c,isInNegLookbehind:t.isInNegLookbehind||d});if(e.body.push(r),(c||t.isInLookbehind)&&!s){let e="Lookbehind includes a pattern not allowed by Oniguruma";if(d||t.isInNegLookbehind){if(T(r)||"CapturingGroup"===r.type)throw Error(e)}else if(T(r)||W(r)&&r.negate)throw Error(e)}}f=V(a[r.nextIndex])}return r.nextIndex++,u}(t,O,r);case"NamedCallout":var n,l;return n=t.kind,l=t.tag,{type:"NamedCallout",kind:n,tag:l,arguments:t.arguments};case"Quantifier":return function({kind:e,min:r,max:t},n){let a=n.parent,i=a.body.at(-1);if(!i||!A.has(i.type))throw Error("Quantifier requires a repeatable token");let o=R(e,r,t,i);return a.body.pop(),o}(t,O);case"Subroutine":return function({raw:e},r){let{capturingGroups:t,subroutines:n}=r,a=e.slice(3,-1),i=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(a);if(i){let e=+i.groups.num,n=t.length;if(r.hasNumberedRef=!0,(a=({"":e,"+":n+e,"-":n+1-e})[i.groups.sign])<1)throw Error("Invalid subroutine number")}else"0"===a&&(a=0);let o=G(a);return n.push(o),o}(t,O);default:throw Error(`Unexpected token type "${t.type}"`)}},O={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:u.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:u.skipBackrefValidation,skipLookbehindValidation:u.skipLookbehindValidation,skipPropertyNameValidation:u.skipPropertyNameValidation,subroutines:[],tokens:x.tokens,unicodePropertyMap:u.unicodePropertyMap,walk:$},H=(t={type:"Flags",...x.flags},{type:"Regex",body:D(void 0),flags:t}),X=H.body[0];for(;O.nextIndex<x.tokens.length;){let e=$(X,{});"Alternative"===e.type?(H.body.push(e),X=e):X.body.push(e)}let{capturingGroups:Z,hasNumberedRef:Q,namedGroupsByName:q,subroutines:J}=O;if(Q&&q.size&&!u.rules.captureGroup)throw Error("Numbered backref/subroutine not allowed when using named capture");for(let{ref:e}of J)if("number"==typeof e){if(e>Z.length)throw Error("Subroutine uses a group number that's not defined");e&&(Z[e-1].isSubroutined=!0)}else if(q.has(e)){if(q.get(e).length>1)throw Error(o`Subroutine uses a duplicate group name "\g<${e}>"`);q.get(e)[0].isSubroutined=!0}else throw Error(o`Subroutine uses a group name that's not defined "\g<${e}>"`);return H}function S(e){return{type:"Alternative",body:O(e?.body)}}function _(e,r){let t={type:"Assertion",kind:e};return("word_boundary"===e||"grapheme_boundary"===e)&&(t.negate=!!r?.negate),t}function v(e,r){let t=!!r?.orphan;return{type:"Backreference",ref:e,...t&&{orphan:t}}}function M(e,r){var t;let n={name:void 0,isSubroutined:!1,...r};if(void 0!==n.name&&(t=n.name,!/^[\p{Alpha}\p{Pc}][^)]*$/u.test(t)))throw Error(`Group name "${n.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...n.name&&{name:n.name},...n.isSubroutined&&{isSubroutined:n.isSubroutined},body:D(r?.body)}}function N(e,r){let t={useLastValid:!1,...r};if(e>1114111){let r=e.toString(16);if(t.useLastValid)e=1114111;else throw e>1310719?Error(`Invalid code point out of range "\\x{${r}}"`):Error(`Invalid code point out of range in JS "\\x{${r}}"`)}return{type:"Character",value:e}}function L(e){let r={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:r.kind,negate:r.negate,body:O(e?.body)}}function F(e,r){let t=!!r?.negate,n={type:"CharacterSet",kind:e};return("digit"===e||"hex"===e||"newline"===e||"space"===e||"word"===e)&&(n.negate=t),"grapheme"!==e&&("newline"!==e||t)||(n.variableLength=!0),n}function P(e){let r=e?.atomic,t=e?.flags;if(r&&t)throw Error("Atomic group cannot have flags");return{type:"Group",...r&&{atomic:r},...t&&{flags:t},body:D(e?.body)}}function U(e){let r={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:r.behind?"lookbehind":"lookahead",negate:r.negate,body:D(e?.body)}}function R(e,r,t,n){if(r>t)throw Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:r,max:t,body:n}}function G(e){return{type:"Subroutine",ref:e}}function B(e,r){let t={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...r},n=t.unicodePropertyMap?.get(z(e));if(!n){if(t.normalizeUnknownPropertyNames)n=e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,e=>e[0].toUpperCase()+e.slice(1).toLowerCase());else if(t.unicodePropertyMap&&!t.skipPropertyNameValidation)throw Error(o`Invalid Unicode property "\p{${e}}"`)}return{type:"CharacterSet",kind:"property",value:n??e,negate:t.negate}}function D(e){if(void 0===e)e=[S()];else if(!Array.isArray(e)||!e.length||!e.every(e=>"Alternative"===e.type))throw Error("Invalid body; expected array of one or more Alternative nodes");return e}function O(e){if(void 0===e)e=[];else if(!Array.isArray(e)||!e.every(e=>!!e.type))throw Error("Invalid body; expected array of nodes");return e}function T(e){return"LookaroundAssertion"===e.type&&"lookahead"===e.kind}function W(e){return"LookaroundAssertion"===e.type&&"lookbehind"===e.kind}function z(e){return e.replace(/[- _]+/g,"").toLowerCase()}function j(e,r){return s(e,`${r?.type==="Character"&&93===r.value?"Empty":"Unclosed"} character class`)}function V(e){return s(e,"Unclosed group")}let H=String.raw,X=H`(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})`,Z=H`\u{E0061}-\u{E007A}`,Q=()=>RegExp(H`[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[${Z}]{2}[\u{E0030}-\u{E0039}${Z}]{1,3}\u{E007F}|${X}(?:\u200D${X})*`,"gu");function q(e,r,t=null){function n(e,r){for(let t=0;t<e.length;t++){let n=a(e[t],r,t,e);t=Math.max(-1,t+n)}}function a(i,o=null,l=null,u=null){let p=0,c=!1,d={node:i,parent:o,key:l,container:u,root:e,remove(){J(u).splice(Math.max(0,K(l)+p),1),p--,c=!0},removeAllNextSiblings:()=>J(u).splice(K(l)+1),removeAllPrevSiblings(){let e=K(l)+p;return p-=e,J(u).splice(0,Math.max(0,e))},replaceWith(e,r={}){let t=!!r.traverse;u?u[Math.max(0,K(l)+p)]=e:s(o,"Can't replace root node")[l]=e,t&&a(e,o,l,u),c=!0},replaceWithMultiple(e,r={}){let t=!!r.traverse;if(J(u).splice(Math.max(0,K(l)+p),1,...e),p+=e.length-1,t){let r=0;for(let t=0;t<e.length;t++)r+=a(e[t],o,K(l)+t+r,u)}c=!0},skip(){c=!0}},{type:f}=i,g=r["*"],h=r[f],y="function"==typeof g?g:g?.enter,m="function"==typeof h?h:h?.enter;if(y?.(d,t),m?.(d,t),!c)switch(f){case"AbsenceFunction":case"CapturingGroup":case"Group":case"Alternative":case"CharacterClass":case"LookaroundAssertion":n(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":a(i.min,i,"min"),a(i.max,i,"max");break;case"Quantifier":a(i.body,i,"body");break;case"Regex":n(i.body,i),a(i.flags,i,"flags");break;default:throw Error(`Unexpected node type "${f}"`)}return h?.exit?.(d,t),g?.exit?.(d,t),p}return a(e),e}function J(e){if(!Array.isArray(e))throw Error("Container expected");return e}function K(e){if("number"!=typeof e)throw Error("Numeric key expected");return e}let Y=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`,ee=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function er(e,r,t,n){let a=RegExp(String.raw`${r}|(?<$skip>\[\^?|\\?.)`,"gsu"),i=[!1],o=0,s="";for(let r of e.matchAll(a)){let{0:e,groups:{$skip:a}}=r;if(!a&&(!n||n===ee.DEFAULT==!o)){t instanceof Function?s+=t(r,{context:o?ee.CHAR_CLASS:ee.DEFAULT,negated:i[i.length-1]}):s+=t;continue}"["===e[0]?(o++,i.push("^"===e[1])):"]"===e&&o&&(o--,i.pop()),s+=e}return s}function et(e,r,t){return!!function(e,r,t=0,n){let a;if(!RegExp(r,"su").test(e))return null;let i=RegExp(`${r}|(?<$skip>\\\\?.)`,"gsu");i.lastIndex=t;let o=0;for(;a=i.exec(e);){let{0:e,groups:{$skip:r}}=a;if(!r&&(!n||n===ee.DEFAULT==!o))return a;"["===e?o++:"]"===e&&o&&o--,i.lastIndex==a.index&&i.lastIndex++}return null}(e,r,0,t)}let en=RegExp(String.raw`(?<noncapturingStart>${Y})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu"),ea=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,ei=RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${ea})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu"),eo=String.raw,es=eo`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,el=eo`\(\?R=(?<rDepth>[^\)]+)\)|${es}`,eu=eo`\(\?<(?![=!])(?<captureName>[^>]+)>`,ep=eo`${eu}|(?<unnamed>\()(?!\?)`,ec=RegExp(eo`${eu}|${el}|\(\?|\\?.`,"gsu"),ed="Cannot use multiple overlapping recursions";function ef(e){let r=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e)||(e*=1)<2||e>100)throw Error(r)}function eg(e,r,t,n,a,i,o){let s=new Set;n&&er(e+r,eu,({groups:{captureName:e}})=>{s.add(e)},ee.DEFAULT);let l=[t,n?s:null,a,i,o];return`${e}${eh(`(?:${e}`,"forward",...l)}(?:)${eh(`${r})`,"backward",...l)}${r}`}function eh(e,r,t,n,a,i,o){let s=e=>"forward"===r?e+2:t-e+2-1,l="";for(let r=0;r<t;r++){let t=s(r);l+=er(e,eo`${ep}|\\k<(?<backref>[^>]+)>`,({0:e,groups:{captureName:r,unnamed:s,backref:l}})=>{if(l&&n&&!n.has(l))return e;let u=`_$${t}`;if(s||r){let t=o+i.length+1;return i.push(t),function(e,r){for(let t=0;t<e.length;t++)e[t]>=r&&e[t]++}(a,t),s?e:`(?<${r}${u}>`}return eo`\k<${l}${u}>`},ee.DEFAULT)}return l}function ey(e,r,t,n,a,i){if(e.size&&n){let o=0;er(r,ep,()=>o++,ee.DEFAULT);let s=i-o+a,l=new Map;return e.forEach((e,r)=>{let a=(n-o*t)/t,i=o*t,u=r>s+o?r+n:r,p=[];for(let r of e)if(r<=s)p.push(r);else if(r>s+o+a)p.push(r+n);else if(r<=s+o)for(let e=0;e<=t;e++)p.push(r+o*e);else for(let e=0;e<=t;e++)p.push(r+i+a*e);l.set(u,p)}),l}return e}var em=String.fromCodePoint,eb=String.raw,eC={flagGroups:(()=>{try{RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{RegExp("","v")}catch{return!1}return!0})()};function ew(e,{enable:r,disable:t}){return{dotAll:!t?.dotAll&&!!(r?.dotAll||e.dotAll),ignoreCase:!t?.ignoreCase&&!!(r?.ignoreCase||e.ignoreCase)}}function ex(e,r,t){return e.has(r)||e.set(r,t),e.get(r)}eC.bugLiteralHyphenIsRange=(()=>{if(!eC.unicodeSets)return!1;try{RegExp(eb`[\d\-a]`,"v")}catch{return!0}return!1})();var ek={ES2025:2025,ES2024:2024,ES2018:2018},eE={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function e$(e={}){if("[object Object]"!==({}).toString.call(e))throw Error("Unexpected options");if(void 0!==e.target&&!eE[e.target])throw Error(`Unexpected target "${e.target}"`);let r={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return"auto"===r.target&&(r.target=eC.flagGroups?"ES2025":eC.unicodeSets?"ES2024":"ES2018"),r}var eA=eb`[\p{L}\p{M}\p{N}\p{Pc}]`,eI=new Set([em(304),em(305)]);function eS(e){if(eI.has(e))return[e];let r=new Set,t=e.toLowerCase(),n=t.toUpperCase(),a=eN.get(t),i=ev.get(t),o=eM.get(t);return 1==[...n].length&&r.add(n),o&&r.add(o),a&&r.add(a),r.add(t),i&&r.add(i),[...r]}var e_=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(e=>[z(e),e])),ev=new Map([["s",em(383)],[em(383),"s"]]),eM=new Map([[em(223),em(7838)],[em(107),em(8490)],[em(229),em(8491)],[em(969),em(8486)]]),eN=new Map([eF(453),eF(456),eF(459),eF(498),...eP(8072,8079),...eP(8088,8095),...eP(8104,8111),eF(8124),eF(8140),eF(8188)]),eL=new Map([["alnum",eb`[\p{Alpha}\p{Nd}]`],["alpha",eb`\p{Alpha}`],["ascii",eb`\p{ASCII}`],["blank",eb`[\p{Zs}\t]`],["cntrl",eb`\p{Cc}`],["digit",eb`\p{Nd}`],["graph",eb`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",eb`\p{Lower}`],["print",eb`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",eb`[\p{P}\p{S}]`],["space",eb`\p{space}`],["upper",eb`\p{Upper}`],["word",eb`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",eb`\p{AHex}`]]);function eF(e){let r=em(e);return[r.toLowerCase(),r]}function eP(e,r){return(function(e,r){let t=[];for(let n=e;n<=r;n++)t.push(n);return t})(e,r).map(e=>eF(e))}var eU=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]),eR={AbsenceFunction({node:e,parent:r,replaceWith:t}){let{body:n,kind:a}=e;if("repeater"===a){let e=P();e.body[0].body.push(U({negate:!0,body:n}),B("Any"));let a=P();a.body[0].body.push(R("greedy",0,1/0,e)),t(eZ(a,r),{traverse:!0})}else throw Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:e,parent:r,key:t},{flagDirectivesByAlt:n}){let a=e.body.filter(e=>"flags"===e.kind);for(let e=t+1;e<r.body.length;e++)ex(n,r.body[e],[]).push(...a)},exit({node:e},{flagDirectivesByAlt:r}){if(r.get(e)?.length){let t=eW(r.get(e));if(t){let r=P({flags:t});r.body[0].body=e.body,e.body=[eZ(r,e)]}}}},Assertion({node:e,parent:r,key:t,container:n,root:a,remove:i,replaceWith:o},s){let{kind:l,negate:u}=e,{asciiWordBoundaries:p,avoidSubclass:c,supportedGNodes:d,wordIsAscii:f}=s;if("grapheme_boundary"===l)throw Error(`Unsupported grapheme boundary "\\${u?"Y":"y"}"`);if("line_end"===l)o(eZ(U({body:[S({body:[_("string_end")]}),S({body:[N(10)]})]}),r));else if("line_start"===l)o(eZ(eV(eb`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),r));else if("search_start"===l){if(d.has(e))a.flags.sticky=!0,i();else{let e=n[t-1];if(e&&function(e){let r=["Character","CharacterClass","CharacterSet"];return r.includes(e.type)||"Quantifier"===e.type&&e.min&&r.includes(e.body.type)}(e))o(eZ(U({negate:!0}),r));else if(c)throw Error(eb`Uses "\G" in a way that requires a subclass`);else o(eX(_("string_start"),r)),s.strategy="clip_search"}}else if("string_end"===l||"string_start"===l);else if("string_end_newline"===l)o(eZ(eV(eb`(?=\n?\z)`),r));else if("word_boundary"===l){if(!f&&!p){let e=`(?:(?<=${eA})(?!${eA})|(?<!${eA})(?=${eA}))`,t=`(?:(?<=${eA})(?=${eA})|(?<!${eA})(?!${eA}))`;o(eZ(eV(u?t:e),r))}}else throw Error(`Unexpected assertion kind "${l}"`)},Backreference({node:e},{jsGroupNameMap:r}){let{ref:t}=e;"string"!=typeof t||ej(t)||(e.ref=t=eT(t,r))},CapturingGroup({node:e},{jsGroupNameMap:r,subroutineRefMap:t}){let{name:n}=e;n&&!ej(n)&&(e.name=n=eT(n,r)),t.set(e.number,e),n&&t.set(n,e)},CharacterClassRange({node:e,parent:r,replaceWith:t}){"intersection"===r.kind&&t(eZ(L({body:[e]}),r),{traverse:!0})},CharacterSet({node:e,parent:r,replaceWith:t},{accuracy:n,minTargetEs2024:a,digitIsAscii:i,spaceIsAscii:o,wordIsAscii:s}){let{kind:l,negate:u,value:p}=e;if(i&&("digit"===l||"digit"===p)){t(eX(F("digit",{negate:u}),r));return}if(o&&("space"===l||"space"===p)){t(eZ(eH(eV("[	-\r ]"),u),r));return}if(s&&("word"===l||"word"===p)){t(eX(F("word",{negate:u}),r));return}if("any"===l)t(eX(B("Any"),r));else if("digit"===l)t(eX(B("Nd",{negate:u}),r));else if("dot"===l);else if("grapheme"===l){if("strict"===n)throw Error(eb`Use of "\X" requires non-strict accuracy`);let e=a?eb`\p{RGI_Emoji}`:Q().source.replace(/\\u\{/g,`\\x{`);t(eZ(eV(eb`(?>\r\n|${e}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),r))}else if("hex"===l)t(eX(B("AHex",{negate:u}),r));else if("newline"===l)t(eZ(eV(u?"[^\n]":"(?>\r\n?|[\n\v\f\x85\u2028\u2029])"),r));else if("posix"===l){if(a||"graph"!==p&&"print"!==p)t(eZ(eH(eV(eL.get(p)),u),r));else{if("strict"===n)throw Error(`POSIX class "${p}" requires min target ES2024 or non-strict accuracy`);let e={graph:"!-~",print:" -~"}[p];u&&(e=`\0-${em(e.codePointAt(0)-1)}${em(e.codePointAt(2)+1)}-\u{10FFFF}`),t(eZ(eV(`[${e}]`),r))}}else if("property"===l)e_.has(z(p))||(e.key="sc");else if("space"===l)t(eX(B("space",{negate:u}),r));else if("word"===l)t(eZ(eH(eV(eA),u),r));else throw Error(`Unexpected character set kind "${l}"`)},Directive({node:e,parent:r,root:t,remove:n,replaceWith:a,removeAllPrevSiblings:i,removeAllNextSiblings:o}){let{kind:s,flags:l}=e;if("flags"===s){if(l.enable||l.disable){let e=P({flags:l});e.body[0].body=o(),a(eZ(e,r),{traverse:!0})}else n()}else if("keep"===s){let e=t.body[0],n=1===t.body.length&&$(e,{type:"Group"})&&1===e.body[0].body.length?e.body[0]:t;if(r.parent!==n||n.body.length>1)throw Error(eb`Uses "\K" in a way that's unsupported`);let o=U({behind:!0});o.body[0].body=i(),a(eZ(o,r))}else throw Error(`Unexpected directive kind "${s}"`)},Flags({node:e,parent:r}){if(e.posixIsAscii)throw Error('Unsupported flag "P"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii"].forEach(r=>delete e[r]),Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),r.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;let{enable:r,disable:t}=e.flags;r?.extended&&delete r.extended,t?.extended&&delete t.extended,r?.dotAll&&t?.dotAll&&delete r.dotAll,r?.ignoreCase&&t?.ignoreCase&&delete r.ignoreCase,r&&!Object.keys(r).length&&delete e.flags.enable,t&&!Object.keys(t).length&&delete e.flags.disable,e.flags.enable||e.flags.disable||delete e.flags},LookaroundAssertion({node:e},r){let{kind:t}=e;"lookbehind"===t&&(r.passedLookbehind=!0)},NamedCallout({node:e,parent:r,replaceWith:t}){let{kind:n}=e;if("fail"===n)t(eZ(U({negate:!0}),r));else throw Error(`Unsupported named callout "(*${n.toUpperCase()}"`)},Quantifier({node:e}){if("Quantifier"===e.body.type){let r=P();r.body[0].body.push(e.body),e.body=eZ(r,e)}},Regex:{enter({node:e},{supportedGNodes:r}){let t=[],n=!1,a=!1;for(let r of e.body)if(1===r.body.length&&"search_start"===r.body[0].kind)r.body.pop();else{let e=function e(r){let t=r.find(e=>"search_start"===e.kind||function(e,r){let t={negate:null,...r};return"LookaroundAssertion"===e.type&&(null===t.negate||e.negate===t.negate)&&1===e.body.length&&$(e.body[0],{type:"Assertion",kind:"search_start"})}(e,{negate:!1})||!function({type:e}){return"Assertion"===e||"Directive"===e||"LookaroundAssertion"===e}(e));if(!t)return null;if("search_start"===t.kind)return t;if("LookaroundAssertion"===t.type)return t.body[0].body[0];if("CapturingGroup"===t.type||"Group"===t.type){let r=[];for(let n of t.body){let t=e(n.body);if(!t)return null;Array.isArray(t)?r.push(...t):r.push(t)}return r}return null}(r.body);e?(n=!0,Array.isArray(e)?t.push(...e):t.push(e)):a=!0}n&&!a&&t.forEach(e=>r.add(e))},exit(e,{accuracy:r,passedLookbehind:t,strategy:n}){if("strict"===r&&t&&n)throw Error(eb`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:e},{jsGroupNameMap:r}){let{ref:t}=e;"string"!=typeof t||ej(t)||(e.ref=t=eT(t,r))}},eG={Backreference({node:e},{multiplexCapturesToLeftByRef:r,reffedNodesByReferencer:t}){let{orphan:n,ref:a}=e;n||t.set(e,[...r.get(a).map(({node:e})=>e)])},CapturingGroup:{enter({node:e,parent:r,replaceWith:t,skip:n},{groupOriginByCopy:a,groupsByName:i,multiplexCapturesToLeftByRef:o,openRefs:s,reffedNodesByReferencer:l}){let u=a.get(e);if(u&&s.has(e.number)){let n=eX(eO(e.number),r);l.set(n,s.get(e.number)),t(n);return}s.set(e.number,e),o.set(e.number,[]),e.name&&ex(o,e.name,[]);let p=o.get(e.name??e.number);for(let r=0;r<p.length;r++){let t=p[r];if(u===t.node||u&&u===t.origin||e===t.origin){p.splice(r,1);break}}if(o.get(e.number).push({node:e,origin:u}),e.name&&o.get(e.name).push({node:e,origin:u}),e.name){let r=ex(i,e.name,new Map),t=!1;if(u)t=!0;else for(let e of r.values())if(!e.hasDuplicateNameToRemove){t=!0;break}i.get(e.name).set(e,{node:e,hasDuplicateNameToRemove:t})}},exit({node:e},{openRefs:r}){r.delete(e.number)}},Group:{enter({node:e},r){r.prevFlags=r.currentFlags,e.flags&&(r.currentFlags=ew(r.currentFlags,e.flags))},exit(e,r){r.currentFlags=r.prevFlags}},Subroutine({node:e,parent:r,replaceWith:t},n){let{isRecursive:a,ref:i}=e;if(a){let t=r;for(;(t=t.parent)&&("CapturingGroup"!==t.type||t.name!==i&&t.number!==i););n.reffedNodesByReferencer.set(e,t);return}let o=n.subroutineRefMap.get(i),s=0===i,l=s?eO(0):function e(r,t,n,a){let i=Array.isArray(r)?[]:{};for(let[o,s]of Object.entries(r))"parent"===o?i.parent=Array.isArray(n)?a:n:s&&"object"==typeof s?i[o]=e(s,t,i,n):("type"===o&&"CapturingGroup"===s&&t.set(i,t.get(r)??r),i[o]=s);return i}(o,n.groupOriginByCopy,null),u=l;if(!s){var p,c;let e=eW(function(e,r){let t=[];for(;e=e.parent;)(!r||r(e))&&t.push(e);return t}(o,e=>"Group"===e.type&&!!e.flags)),r=e?ew(n.globalFlags,e):n.globalFlags;p=r,c=n.currentFlags,p.dotAll===c.dotAll&&p.ignoreCase===c.ignoreCase||(u=P({flags:function({dotAll:e,ignoreCase:r}){let t={};return(e||r)&&(t.enable={},e&&(t.enable.dotAll=!0),r&&(t.enable.ignoreCase=!0)),e&&r||(t.disable={},e||(t.disable.dotAll=!0),r||(t.disable.ignoreCase=!0)),t}(r)})).body[0].body.push(l)}t(eZ(u,r),{traverse:!s})}},eB={Backreference({node:e,parent:r,replaceWith:t},n){if(e.orphan){n.highestOrphanBackref=Math.max(n.highestOrphanBackref,e.ref);return}let a=n.reffedNodesByReferencer.get(e).filter(r=>(function(e,r){let t=r;do{if("Regex"===t.type)return!1;if("Alternative"===t.type)continue;if(t===e)return!1;for(let r of ez(t.parent)){if(r===t)break;if(r===e||function e(r,t){for(let n of ez(r)??[])if(n===t||e(n,t))return!0;return!1}(r,e))return!0}}while(t=t.parent);throw Error("Unexpected path")})(r,e));a.length?a.length>1?t(eZ(P({atomic:!0,body:a.reverse().map(e=>S({body:[v(e.number)]}))}),r)):e.ref=a[0].number:t(eZ(U({negate:!0}),r))},CapturingGroup({node:e},r){e.number=++r.numCapturesToLeft,e.name&&r.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Regex:{exit({node:e},r){let t=Math.max(r.highestOrphanBackref-r.numCapturesToLeft,0);for(let r=0;r<t;r++){let r=M();e.body.at(-1).body.push(r)}}},Subroutine({node:e},r){e.isRecursive&&0!==e.ref&&(e.ref=r.reffedNodesByReferencer.get(e).number)}};function eD(e){q(e,{"*"({node:e,parent:r}){e.parent=r}})}function eO(e){let r=G(e);return r.isRecursive=!0,r}function eT(e,r){if(r.has(e))return r.get(e);let t=`$${r.size}_${e.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return r.set(e,t),t}function eW(e){let r=["dotAll","ignoreCase"],t={enable:{},disable:{}};return(e.forEach(({flags:e})=>{r.forEach(r=>{e.enable?.[r]&&(delete t.disable[r],t.enable[r]=!0),e.disable?.[r]&&(t.disable[r]=!0)})}),Object.keys(t.enable).length||delete t.enable,Object.keys(t.disable).length||delete t.disable,t.enable||t.disable)?t:null}function ez(e){if(!e)throw Error("Node expected");let{body:r}=e;return Array.isArray(r)?r:r?[r]:null}function ej(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function eV(e,r){let t=I(e,{...r,unicodePropertyMap:e_}).body;return t.length>1||t[0].body.length>1?P({body:t}):t[0].body[0]}function eH(e,r){return e.negate=r,e}function eX(e,r){return e.parent=r,e}function eZ(e,r){return eD(e),e.parent=r,e}var eQ={"*":{enter({node:e},r){if(e4(e)){let t=r.getCurrentModI();r.pushModI(e.flags?ew({ignoreCase:t},e.flags).ignoreCase:t)}},exit({node:e},r){e4(e)&&r.popModI()}},Backreference(e,r){r.setHasCasedChar()},Character({node:e},r){e2(em(e.value))&&r.setHasCasedChar()},CharacterClassRange({node:e,skip:r},t){r(),e8(e,{firstOnly:!0}).length&&t.setHasCasedChar()},CharacterSet({node:e},r){"property"===e.kind&&eU.has(e.value)&&r.setHasCasedChar()}},eq={Alternative:({body:e},r,t)=>e.map(t).join(""),Assertion({kind:e,negate:r}){if("string_end"===e)return"$";if("string_start"===e)return"^";if("word_boundary"===e)return r?eb`\B`:eb`\b`;throw Error(`Unexpected assertion kind "${e}"`)},Backreference({ref:e},r){if("number"!=typeof e)throw Error("Unexpected named backref in transformed AST");if(!r.useFlagMods&&"strict"===r.accuracy&&r.currentFlags.ignoreCase&&!r.captureMap.get(e).ignoreCase)throw Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e},CapturingGroup(e,r,t){let{body:n,name:a,number:i}=e,o={ignoreCase:r.currentFlags.ignoreCase},s=r.originMap.get(e);return s&&(o.hidden=!0,i>s.number&&(o.transferTo=s.number)),r.captureMap.set(i,o),`(${a?`?<${a}>`:""}${n.map(t).join("|")})`},Character({value:e},r){let t=em(e),n=e3(e,{escDigit:"Backreference"===r.lastNode.type,inCharClass:r.inCharClass,useFlagV:r.useFlagV});if(n!==t)return n;if(r.useAppliedIgnoreCase&&r.currentFlags.ignoreCase&&e2(t)){let e=eS(t);return r.inCharClass?e.join(""):e.length>1?`[${e.join("")}]`:e[0]}return t},CharacterClass(e,r,t){let{kind:n,negate:a,parent:i}=e,{body:o}=e;if("intersection"===n&&!r.useFlagV)throw Error("Use of class intersection requires min target ES2024");eC.bugLiteralHyphenIsRange&&r.useFlagV&&o.some(e5)&&(o=o.filter(e=>!e5(e))).push(N(45));let s=()=>`[${a?"^":""}${o.map(t).join("intersection"===n?"&&":"")}]`;if(!r.inCharClass){if(!r.useFlagV&&!a){let r=o.filter(e=>"CharacterClass"===e.type&&"union"===e.kind&&e.negate);if(r.length){let n=P(),a=n.body[0];return n.parent=i,a.parent=n,e.body=o=o.filter(e=>!r.includes(e)),o.length?(e.parent=a,a.body.push(e)):n.body.pop(),r.forEach(e=>{let r=S({body:[e]});e.parent=r,r.parent=n,n.body.push(r)}),t(n)}}r.inCharClass=!0;let n=s();return r.inCharClass=!1,n}let l=o[0];if("union"===n&&!a&&l&&((!r.useFlagV||!r.verbose)&&"union"===i.kind&&!(eC.bugLiteralHyphenIsRange&&r.useFlagV)||!r.verbose&&"intersection"===i.kind&&1===o.length&&"CharacterClassRange"!==l.type))return o.map(t).join("");if(!r.useFlagV&&"CharacterClass"===i.type)throw Error("Use of nested character class requires min target ES2024");return s()},CharacterClassRange(e,r){let t=e.min.value,n=e.max.value,a={escDigit:!1,inCharClass:!0,useFlagV:r.useFlagV},i=e3(t,a),o=e3(n,a),s=new Set;return r.useAppliedIgnoreCase&&r.currentFlags.ignoreCase&&(function(e){let r=e.map(e=>e.codePointAt(0)).sort((e,r)=>e-r),t=[],n=null;for(let e=0;e<r.length;e++)r[e+1]===r[e]+1?n??=r[e]:null===n?t.push(r[e]):(t.push([n,r[e]]),n=null);return t})(e8(e)).forEach(e=>{s.add(Array.isArray(e)?`${e3(e[0],a)}-${e3(e[1],a)}`:e3(e,a))}),`${i}-${o}${[...s].join("")}`},CharacterSet({kind:e,negate:r,value:t,key:n},a){if("dot"===e)return a.currentFlags.dotAll?a.appliedGlobalFlags.dotAll||a.useFlagMods?".":"[^]":eb`[^\n]`;if("digit"===e)return r?eb`\D`:eb`\d`;if("property"===e){if(a.useAppliedIgnoreCase&&a.currentFlags.ignoreCase&&eU.has(t))throw Error(`Unicode property "${t}" can't be case-insensitive when other chars have specific case`);return`${r?eb`\P`:eb`\p`}{${n?`${n}=`:""}${t}}`}if("word"===e)return r?eb`\W`:eb`\w`;throw Error(`Unexpected character set kind "${e}"`)},Flags:(e,r)=>(r.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":""),Group({atomic:e,body:r,flags:t,parent:n},a,i){let o=a.currentFlags;t&&(a.currentFlags=ew(o,t));let s=r.map(i).join("|"),l=a.verbose||1!==r.length||"Quantifier"===n.type||e||a.useFlagMods&&t?`(?${function(e,r,t){if(e)return">";let n="";if(r&&t){let{enable:e,disable:t}=r;n=(e?.ignoreCase?"i":"")+(e?.dotAll?"s":"")+(t?"-":"")+(t?.ignoreCase?"i":"")+(t?.dotAll?"s":"")}return`${n}:`}(e,t,a.useFlagMods)}${s})`:s;return a.currentFlags=o,l},LookaroundAssertion({body:e,kind:r,negate:t},n,a){let i=`${"lookahead"===r?"":"<"}${t?"!":"="}`;return`(?${i}${e.map(a).join("|")})`},Quantifier:(e,r,t)=>t(e.body)+function({kind:e,max:r,min:t}){let n;return(t||1!==r?t||r!==1/0?1===t&&r===1/0?"+":t===r?`{${t}}`:`{${t},${r===1/0?"":r}}`:"*":"?")+({greedy:"",lazy:"?",possessive:"+"})[e]}(e),Subroutine({isRecursive:e,ref:r},t){if(!e)throw Error("Unexpected non-recursive subroutine in transformed AST");let n=t.recursionLimit;return 0===r?`(?R=${n})`:eb`\g<${r}&R=${n}>`}},eJ=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),eK=new Set(["-","\\","]","^","["]),eY=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),e0=new Map([[9,eb`\t`],[10,eb`\n`],[11,eb`\v`],[12,eb`\f`],[13,eb`\r`],[8232,eb`\u2028`],[8233,eb`\u2029`],[65279,eb`\uFEFF`]]),e1=/^\p{Cased}$/u;function e2(e){return e1.test(e)}function e8(e,r){let t=!!r?.firstOnly,n=e.min.value,a=e.max.value,i=[];if(n<65&&(65535===a||a>=131071)||65536===n&&a>=131071)return i;for(let e=n;e<=a;e++){let r=em(e);if(!e2(r))continue;let o=eS(r).filter(e=>{let r=e.codePointAt(0);return r<n||r>a});if(o.length&&(i.push(...o),t))break}return i}function e3(e,{escDigit:r,inCharClass:t,useFlagV:n}){var a;if(e0.has(e))return e0.get(e);if(e<32||e>126&&e<160||e>262143||r&&(a=e)>47&&a<58)return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;let i=em(e);return((t?n?eY:eK:eJ).has(i)?"\\":"")+i}function e4({type:e}){return"CapturingGroup"===e||"Group"===e||"LookaroundAssertion"===e}function e5({type:e,value:r}){return"Character"===e&&45===r}var e9=class e extends RegExp{#e=new Map;#r=null;#t;#n=null;#a=null;rawOptions={};get source(){return this.#t||"(?:)"}constructor(r,t,n){let a=!!n?.lazyCompile;if(r instanceof RegExp){if(n)throw Error("Cannot provide options when copying a regexp");super(r,t),this.#t=r.source,r instanceof e&&(this.#e=r.#e,this.#n=r.#n,this.#a=r.#a,this.rawOptions=r.rawOptions)}else{let e={hiddenCaptures:[],strategy:null,transfers:[],...n};super(a?"":r,t),this.#t=r,this.#e=function(e,r){let t=new Map;for(let r of e)t.set(r,{hidden:!0});for(let[e,n]of r)for(let r of n)ex(t,r,{}).transferTo=e;return t}(e.hiddenCaptures,e.transfers),this.#a=e.strategy,this.rawOptions=n??{}}a||(this.#r=this)}exec(r){if(!this.#r){let{lazyCompile:r,...t}=this.rawOptions;this.#r=new e(this.#t,this.flags,t)}let t=this.global||this.sticky,n=this.lastIndex;if("clip_search"===this.#a&&t&&n){this.lastIndex=0;let e=this.#i(r.slice(n));return e&&(function(e,r,t,n){if(e.index+=r,e.input=t,n){let t=e.indices;for(let e=0;e<t.length;e++){let n=t[e];n&&(t[e]=[n[0]+r,n[1]+r])}let n=t.groups;n&&Object.keys(n).forEach(e=>{let t=n[e];t&&(n[e]=[t[0]+r,t[1]+r])})}}(e,n,r,this.hasIndices),this.lastIndex+=n),e}return this.#i(r)}#i(e){let r;this.#r.lastIndex=this.lastIndex;let t=super.exec.call(this.#r,e);if(this.lastIndex=this.#r.lastIndex,!t||!this.#e.size)return t;let n=[...t];t.length=1,this.hasIndices&&(r=[...t.indices],t.indices.length=1);let a=[0];for(let e=1;e<n.length;e++){let{hidden:i,transferTo:o}=this.#e.get(e)??{};if(i?a.push(null):(a.push(t.length),t.push(n[e]),this.hasIndices&&t.indices.push(r[e])),o&&void 0!==n[e]){let i=a[o];if(!i)throw Error(`Invalid capture transfer to "${i}"`);if(t[i]=n[e],this.hasIndices&&(t.indices[i]=r[e]),t.groups){this.#n||(this.#n=function(e){let r;let t=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,n=new Map,a=0,i=0;for(;r=t.exec(e);){let{0:e,groups:{capture:t,name:o}}=r;"["===e?a++:a?"]"===e&&a--:t&&(i++,o&&n.set(i,o))}return n}(this.source));let a=this.#n.get(o);a&&(t.groups[a]=n[e],this.hasIndices&&(t.indices.groups[a]=r[e]))}}}return t}};class e6{constructor(e,r={}){this.patterns=e,this.options=r;let{forgiving:t=!1,cache:n,regexConstructor:a}=r;if(!a)throw Error("Option `regexConstructor` is not provided");this.regexps=e.map(e=>{if("string"!=typeof e)return e;let r=n?.get(e);if(r){if(r instanceof RegExp)return r;if(t)return null;throw r}try{let r=a(e);return n?.set(e,r),r}catch(r){if(n?.set(e,r),t)return null;throw r}})}regexps;findNextMatchSync(e,r,t){let n="string"==typeof e?e:e.content,a=[];function i(e,r,t=0){return{index:e,captureIndices:r.indices.map(e=>null==e?{start:0xffffffff,end:0xffffffff,length:0}:{start:e[0]+t,end:e[1]+t,length:e[1]-e[0]})}}for(let e=0;e<this.regexps.length;e++){let t=this.regexps[e];if(t)try{t.lastIndex=r;let o=t.exec(n);if(!o)continue;if(o.index===r)return i(e,o,0);a.push([e,o,0])}catch(e){if(this.options.forgiving)continue;throw e}}if(a.length){let e=Math.min(...a.map(e=>e[1].index));for(let[r,t,n]of a)if(t.index===e)return i(r,t,n)}return null}}function e7(e,r){return function(e,r){let t=function(e,r){let t=e$(r),n=function(e,r){let t={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...r};eD(e);let n={accuracy:t.accuracy,asciiWordBoundaries:t.asciiWordBoundaries,avoidSubclass:t.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:ek[t.bestEffortTarget]>=ek.ES2024,passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};q(e,eR,n);let a={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},i={currentFlags:a,prevFlags:null,globalFlags:a,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:n.subroutineRefMap};return q(e,eG,i),q(e,eB,{groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer}),e._originMap=i.groupOriginByCopy,e._strategy=n.strategy,e}(I(e,{flags:t.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:t.rules.captureGroup,singleline:t.rules.singleline},skipBackrefValidation:t.rules.allowOrphanBackrefs,unicodePropertyMap:e_}),{accuracy:t.accuracy,asciiWordBoundaries:t.rules.asciiWordBoundaries,avoidSubclass:t.avoidSubclass,bestEffortTarget:t.target}),a=function(e,r){let t=e$(r),n=ek[t.target]>=ek.ES2024,a=ek[t.target]>=ek.ES2025,i=t.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw Error("Invalid recursionLimit; use 2-20");let o=null,s=null;if(!a){let r=[e.flags.ignoreCase];q(e,eQ,{getCurrentModI:()=>r.at(-1),popModI(){r.pop()},pushModI(e){r.push(e)},setHasCasedChar(){r.at(-1)?o=!0:s=!0}})}let l={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||o)&&!s)},u=e,p={accuracy:t.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:u,originMap:e._originMap,recursionLimit:i,useAppliedIgnoreCase:!!(!a&&o&&s),useFlagMods:a,useFlagV:n,verbose:t.verbose};function c(e){return p.lastNode=u,u=e,(function(e,r){if(null==e)throw Error(r??"Value expected");return e})(eq[e.type],`Unexpected node type "${e.type}"`)(e,p,c)}let d={pattern:e.body.map(c).join("|"),flags:c(e.flags),options:{...e.options}};return n||(delete d.options.force.v,d.options.disable.v=!0,d.options.unicodeSetsPlugin=null),d._captureTransfers=new Map,d._hiddenCaptures=[],p.captureMap.forEach((e,r)=>{e.hidden&&d._hiddenCaptures.push(r),e.transferTo&&ex(d._captureTransfers,e.transferTo,[]).push(r)}),d}(n,t),i=function(e,r){let t;let{hiddenCaptures:n,mode:a}={hiddenCaptures:[],mode:"plugin",...r},i=r?.captureTransfers??new Map;if(!RegExp(el,"su").test(e))return{pattern:e,captureTransfers:i,hiddenCaptures:n};if("plugin"===a&&et(e,eo`\(\?\(DEFINE\)`,ee.DEFAULT))throw Error("DEFINE groups cannot be used with recursion");let o=[],s=et(e,eo`\\[1-9]`,ee.DEFAULT),l=new Map,u=[],p=!1,c=0,d=0;for(ec.lastIndex=0;t=ec.exec(e);){let{0:r,groups:{captureName:f,rDepth:g,gRNameOrNum:h,gRDepth:y}}=t;if("["===r)c++;else if(c)"]"===r&&c--;else{if(g){if(ef(g),p)throw Error(ed);if(s)throw Error(`${"external"===a?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);let r=e.slice(0,t.index),l=e.slice(ec.lastIndex);if(et(l,el,ee.DEFAULT))throw Error(ed);let u=+g-1;e=eg(r,l,u,!1,n,o,d),i=ey(i,r,u,o.length,0,d);break}if(h){ef(y);let c=!1;for(let e of u)if(e.name===h||e.num===+h){if(c=!0,e.hasRecursedWithin)throw Error(ed);break}if(!c)throw Error(eo`Recursive \g cannot be used outside the referenced group "${"external"===a?h:eo`\g<${h}&R=${y}>`}"`);let f=l.get(h),g=function(e,r){let t;let n=/\\?./gsu;n.lastIndex=r;let a=e.length,i=0,o=1;for(;t=n.exec(e);){let[e]=t;if("["===e)i++;else if(i)"]"===e&&i--;else if("("===e)o++;else if(")"===e&&!--o){a=t.index;break}}return e.slice(r,a)}(e,f);if(s&&et(g,eo`${eu}|\((?!\?)`,ee.DEFAULT))throw Error(`${"external"===a?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);let m=e.slice(f,t.index),b=g.slice(m.length+r.length),C=o.length,w=+y-1,x=eg(m,b,w,!0,n,o,d);i=ey(i,m,w,o.length-C,C,d);let k=e.slice(0,f),E=e.slice(f+g.length);e=`${k}${x}${E}`,ec.lastIndex+=x.length-r.length-m.length-b.length,u.forEach(e=>e.hasRecursedWithin=!0),p=!0}else if(f)d++,l.set(String(d),ec.lastIndex),l.set(f,ec.lastIndex),u.push({num:d,name:f});else if("("===r[0]){let e="("===r;e&&(d++,l.set(String(d),ec.lastIndex)),u.push(e?{num:d}:{})}else")"===r&&u.pop()}}return n.push(...o),{pattern:e,captureTransfers:i,hiddenCaptures:n}}(a.pattern,{captureTransfers:a._captureTransfers,hiddenCaptures:a._hiddenCaptures,mode:"external"}),o=function(e,r){let t;let n=r?.hiddenCaptures??[],a=r?.captureTransfers??new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:a,hiddenCaptures:n};let i="(?:(?=(",o=[0],s=[],l=0,u=0,p=NaN;do{let r;t=!1;let c=0,d=0,f=!1;for(en.lastIndex=Number.isNaN(p)?0:p+i.length;r=en.exec(e);){let{0:g,index:h,groups:{capturingStart:y,noncapturingStart:m}}=r;if("["===g)c++;else if(c)"]"===g&&c--;else if("(?>"!==g||f){if(f&&m)d++;else if(y)f?d++:(l++,o.push(l+u));else if(")"===g&&f){if(!d){let r=l+ ++u;if(e=`${e.slice(0,p)}${i}${e.slice(p+3,h)}))<$$${r}>)${e.slice(h+1)}`,t=!0,s.push(r),!function(e,r){for(let t=0;t<e.length;t++)e[t]>=r&&e[t]++}(n,r),a.size){let e=new Map;a.forEach((t,n)=>{e.set(n>=r?n+1:n,t.map(e=>e>=r?e+1:e))}),a=e}break}d--}}else p=h,f=!0}}while(t);return n.push(...s),{pattern:e=er(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:e,groups:{backrefNum:r,wrappedBackrefNum:t}})=>{if(r){let t=+r;if(t>o.length-1)throw Error(`Backref "${e}" greater than number of captures`);return`\\${o[t]}`}return`\\${t}`},ee.DEFAULT),captureTransfers:a,hiddenCaptures:n}}(function(e){let r;if(!RegExp(`${ea}\\+`).test(e))return{pattern:e};let t=[],n=null,a=null,i="",o=0;for(ei.lastIndex=0;r=ei.exec(e);){let{0:u,index:p,groups:{qBase:c,qMod:d,invalidQ:f}}=r;if("["===u)o||(a=p),o++;else if("]"===u)o?o--:a=null;else if(!o){if("+"===d&&i&&!i.startsWith("(")){if(f)throw Error(`Invalid quantifier "${u}"`);let r=-1;if(/^\{\d+\}$/.test(c)){var s,l;s=e,l=p+c.length,e=s.slice(0,l)+""+s.slice(l+d.length)}else{if(")"===i||"]"===i){let r=")"===i?n:a;if(null===r)throw Error(`Invalid unmatched "${i}"`);e=`${e.slice(0,r)}(?>${e.slice(r,p)}${c})${e.slice(p+u.length)}`}else e=`${e.slice(0,p-i.length)}(?>${i}${c})${e.slice(p+u.length)}`;r+=4}ei.lastIndex+=r}else"("===u[0]?t.push(p):")"===u&&(n=t.length?t.pop():null)}i=u}return{pattern:e}}(i.pattern).pattern,{captureTransfers:i.captureTransfers,hiddenCaptures:i.hiddenCaptures}),s={pattern:o.pattern,flags:`${t.hasIndices?"d":""}${t.global?"g":""}${a.flags}${a.options.disable.v?"u":"v"}`};if(t.avoidSubclass){if(t.lazyCompileLength!==1/0)throw Error("Lazy compilation requires subclass")}else{let e=o.hiddenCaptures.sort((e,r)=>e-r),r=Array.from(o.captureTransfers),a=n._strategy,i=s.pattern.length>=t.lazyCompileLength;(e.length||r.length||a||i)&&(s.options={...e.length&&{hiddenCaptures:e},...r.length&&{transfers:r},...a&&{strategy:a},...i&&{lazyCompile:i}})}return s}(e,r);return t.options?new e9(t.pattern,t.flags,t.options):new RegExp(t.pattern,t.flags)}(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...r})}function re(e={}){let r=Object.assign({target:"auto",cache:new Map},e);return r.regexConstructor||=e=>e7(e,{target:r.target}),{createScanner:e=>new e6(e,r),createString:e=>({content:e})}}function rr(){let e={cache:new Map,regexConstructor:()=>{throw Error("JavaScriptRawEngine: only support precompiled grammar")}};return{createScanner:r=>new e6(r,e),createString:e=>({content:e})}}}}]);